# üèóÔ∏è RBQ/CCQ

## Introduction

Le module **RBQ/CCQ** (R√©gie du b√¢timent du Qu√©bec / Commission de la construction du Qu√©bec) assure le suivi complet de la conformit√© r√©glementaire de votre entreprise de construction au Qu√©bec. Il centralise les licences d'entrepreneur, cartes de comp√©tence des travailleurs, attestations et certifications obligatoires pour op√©rer l√©galement.

Ce module g√®re les 26 cat√©gories de licences RBQ et les 26 m√©tiers certifi√©s CCQ avec alertes automatiques d'expiration √† 60 jours.

---

## Acc√®s au Module

1. Dans le menu lat√©ral, cliquez sur **"üèóÔ∏è RBQ/CCQ"**
2. L'interface √† 5 onglets s'affiche :
   - üé´ Licences RBQ
   - üë∑ Cartes CCQ
   - üìã Attestations
   - ‚úÖ V√©rifications
   - üìä Tableau de bord
3. Naviguez entre les sections selon vos besoins

---

## Les 5 Sections du Module

| Onglet | Ic√¥ne | Description |
|--------|-------|-------------|
| **Licences RBQ** | üé´ | Gestion des licences d'entrepreneur |
| **Cartes CCQ** | üë∑ | Cartes de comp√©tence des travailleurs |
| **Attestations** | üìã | Attestations diverses (solvabilit√©, etc.) |
| **V√©rifications** | ‚úÖ | Contr√¥le de conformit√© des projets |
| **Tableau de bord** | üìä | Vue d'ensemble et indicateurs |

---

## Cat√©gories de Licences RBQ (26)

### Licences G√©n√©rales

| Code | Cat√©gorie | Description |
|------|-----------|-------------|
| **1.1** | Entrepreneur en b√¢timents r√©sidentiels neufs classe I | Grandes constructions |
| **1.2** | Entrepreneur en b√¢timents r√©sidentiels neufs classe II | Petites constructions |
| **1.3** | Entrepreneur en petits b√¢timents | Annexes, garages |
| **16** | Entrepreneur g√©n√©ral | Tous travaux |

### Licences Sp√©cialis√©es

| Code | Cat√©gorie |
|------|-----------|
| **2** | Entrepreneur en syst√®mes de chauffage √† air chaud |
| **3** | Entrepreneur en plomberie |
| **4** | Entrepreneur en √©lectricit√© |
| **5.1** | Entrepreneur en excavation et terrassement |
| **5.2** | Entrepreneur en fondations profondes |
| **6** | Entrepreneur en charpente et menuiserie |
| **7** | Entrepreneur en rev√™tements ext√©rieurs |
| **8** | Entrepreneur en syst√®mes int√©rieurs |
| **9** | Entrepreneur en toitures |
| **10** | Entrepreneur en isolation, √©tanch√©it√©, couvertures m√©talliques |
| **11.1** | Entrepreneur en structures de b√©ton |
| **11.2** | Entrepreneur en b√©ton pr√©fabriqu√© |
| **12** | Entrepreneur en armature et ferraillage |
| **13** | Entrepreneur en structures m√©talliques et pr√©fabriqu√©s |
| **14** | Entrepreneur en ma√ßonnerie |

### Licences M√©canique du B√¢timent

| Code | Cat√©gorie |
|------|-----------|
| **15.1** | Entrepreneur en syst√®mes de chauffage √† eau chaude |
| **15.2** | Entrepreneur en syst√®mes de chauffage √† vapeur |
| **15.3** | Entrepreneur en syst√®mes de br√ªleurs au mazout |
| **15.4** | Entrepreneur en syst√®mes de br√ªleurs au gaz |
| **15.5** | Entrepreneur en ventilation |
| **15.6** | Entrepreneur en climatisation |
| **15.7** | Entrepreneur en r√©frig√©ration |
| **15.8** | Entrepreneur en protection-incendie |

---

## M√©tiers CCQ (26 m√©tiers)

### Liste des M√©tiers Certifi√©s

| M√©tier | Qualification |
|--------|---------------|
| **Apprenti** | 1re, 2e, 3e, 4e p√©riode |
| **Briqueteur-ma√ßon** | Compagnon |
| **Calorifugeur** | Compagnon |
| **Carreleur** | Compagnon |
| **Charpentier-menuisier** | Compagnon |
| **Chaudronnier** | Compagnon |
| **Cimentier-applicateur** | Compagnon |
| **Couvreur** | Compagnon |
| **√âlectricien** | Compagnon |
| **Ferblantier** | Compagnon |
| **Ferrailleur** | Compagnon |
| **Frigoriste** | Compagnon |
| **Grutier** | Classe 1, 2, 3, 4 |
| **M√©canicien d'ascenseur** | Compagnon |
| **M√©canicien de chantier** | Compagnon |
| **M√©canicien en protection-incendie** | Compagnon |
| **Monteur-assembleur** | Compagnon |
| **Monteur-m√©canicien (vitrier)** | Compagnon |
| **Op√©rateur d'√©quipement lourd** | Classe 1, 2, 3, 4 |
| **Op√©rateur de pelles m√©caniques** | Compagnon |
| **Peintre** | Compagnon |
| **Pl√¢trier** | Compagnon |
| **Plombier** | Compagnon |
| **Poseur de rev√™tements souples** | Compagnon |
| **Poseur de syst√®mes int√©rieurs** | Compagnon |
| **Soudeur** | Classe A, B, C |
| **Soudeur en tuyauterie** | Classe A, B |
| **Tuyauteur** | Compagnon |

---

## Types d'Attestations

### Attestations de Conformit√©

| Type | Code | Description |
|------|------|-------------|
| **CSST** | CSST | Attestation de conformit√© CNESST |
| **DAS** | DAS | D√©claration Annuelle de Services |
| **CCQ** | CCQ | Attestation CCQ - √âtat de situation |
| **RBQ** | RBQ | Attestation de solvabilit√© RBQ |

---

## Fonctionnalit√©s Principales

### 1. Gestion des Licences RBQ

| Action | Bouton | Description |
|--------|--------|-------------|
| **Ajouter** | ‚ûï Ajouter | Nouvelle licence |
| **Modifier** | ‚úèÔ∏è Modifier | √âditer une licence |
| **Supprimer** | üóëÔ∏è Supprimer | Retirer une licence |
| **Voir** | üëÅÔ∏è D√©tails | Consulter les d√©tails |

### 2. Informations d'une Licence RBQ

| Champ | Obligatoire | Description |
|-------|-------------|-------------|
| **Num√©ro de licence** | Oui | Format: XXXX-XXXX-XX |
| **Cat√©gories** | Oui | Une ou plusieurs cat√©gories |
| **Date d'√©mission** | Oui | Date de d√©livrance |
| **Date d'expiration** | Oui | Date de fin de validit√© |
| **Statut** | Auto | Actif/Expir√© |

### 3. Gestion des Cartes CCQ

| Champ | Description |
|-------|-------------|
| **Employ√©** | Lien vers fiche employ√© |
| **Num√©ro de carte** | Num√©ro CCQ |
| **M√©tier** | M√©tier certifi√© |
| **Classification** | Apprenti/Compagnon/Classe |
| **Date d'expiration** | Validit√© de la carte |

### 4. V√©rification de Conformit√© Projet

Le syst√®me v√©rifie automatiquement :
- Licence RBQ appropri√©e pour le type de projet
- Cartes CCQ des employ√©s assign√©s
- Attestations requises
- Validit√© de toutes les dates

---

## Alertes et Rappels

### Niveaux d'Alerte

| D√©lai | Niveau | Action |
|-------|--------|--------|
| **> 60 jours** | üü¢ Normal | Aucune action |
| **31-60 jours** | üü° Avertissement | Planifier renouvellement |
| **1-30 jours** | üü† Alerte | Renouveler rapidement |
| **Expir√©** | üî¥ Critique | Action imm√©diate requise |

### V√©rification Automatique

```python
def verifier_expirations_rbq(self) -> List[Dict]:
    """V√©rifie les licences RBQ expirant dans les 60 jours"""
    # Retourne la liste des licences proches de l'expiration
```

---

## Guide Pas-√†-Pas

### Enregistrer une licence RBQ

1. Acc√©dez √† l'onglet **"üé´ Licences RBQ"**
2. Cliquez sur **"‚ûï Ajouter/Modifier une licence"**
3. Remplissez le formulaire :

   **Identification :**
   - Num√©ro de licence RBQ (format: XXXX-XXXX-XX)

   **Cat√©gories :**
   - S√©lectionnez une ou plusieurs cat√©gories parmi les 26 disponibles
   - Exemples: 1.1, 3, 4, 6, 16...

   **Dates :**
   - Date d'√©mission
   - Date d'expiration

   **Responsable :**
   - R√©pondant l√©gal

4. Cliquez sur **"‚úÖ Enregistrer"**
5. La licence appara√Æt dans la liste avec son statut

### Ajouter une carte CCQ

1. Acc√©dez √† l'onglet **"üë∑ Cartes CCQ"**
2. Cliquez sur **"‚ûï Ajouter une carte"**
3. Remplissez :

   **Employ√© :**
   - S√©lectionnez l'employ√© dans la liste

   **Carte :**
   - Num√©ro de carte CCQ
   - M√©tier (liste des 26 m√©tiers)
   - Classification (Apprenti p√©riode 1-4, Compagnon, Classe)

   **Validit√© :**
   - Date d'expiration

4. Enregistrez
5. La carte est li√©e √† l'employ√©

### G√©rer les attestations

1. Acc√©dez √† l'onglet **"üìã Attestations"**
2. Types disponibles :
   - CSST (CNESST)
   - DAS (D√©claration Annuelle)
   - CCQ (√âtat de situation)
   - RBQ (Solvabilit√©)
3. Pour chaque type, entrez :
   - Num√©ro d'attestation
   - Date d'√©mission
   - Date d'expiration
   - Document PDF (optionnel)
4. Enregistrez

### V√©rifier la conformit√© d'un projet

1. Acc√©dez √† l'onglet **"‚úÖ V√©rifications"**
2. S√©lectionnez le projet √† v√©rifier
3. Entrez les param√®tres :
   - Type de projet (r√©sidentiel, commercial, etc.)
   - Valeur estim√©e ($)
   - Ville/R√©gion
4. Cliquez sur **"V√©rifier la conformit√©"**
5. Le rapport affiche :
   - ‚úÖ √âl√©ments conformes
   - ‚ö†Ô∏è Alertes
   - ‚ùå Non-conformit√©s
6. Corrigez les probl√®mes identifi√©s

### Consulter le tableau de bord

1. Acc√©dez √† l'onglet **"üìä Tableau de bord"**
2. Consultez les m√©triques :

   | M√©trique | Description |
   |----------|-------------|
   | **Licences actives** | Nombre de licences RBQ valides |
   | **Cartes CCQ valides** | Nombre de cartes en cours de validit√© |
   | **Attestations valides** | Nombre d'attestations √† jour |
   | **Score conformit√©** | Pourcentage global de conformit√© |

3. Section **"Alertes"** : Documents expirant bient√¥t
4. Section **"Prochains renouvellements"** : Calendrier

---

## V√©rification de Conformit√© Projet

### Crit√®res V√©rifi√©s

| √âl√©ment | V√©rification |
|---------|--------------|
| **Licence RBQ** | Cat√©gorie appropri√©e pour le type de projet |
| **Validit√©** | Date d'expiration non d√©pass√©e |
| **Cartes CCQ** | Employ√©s assign√©s ont des cartes valides |
| **Attestations** | CSST, DAS √† jour |

### Rapport de Conformit√©

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ RAPPORT DE CONFORMIT√â - Projet #123      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Type: R√©sidentiel neuf                   ‚îÇ
‚îÇ Valeur: 450 000 $                        ‚îÇ
‚îÇ Ville: Qu√©bec                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚úÖ Licence RBQ 1.1 - Valide              ‚îÇ
‚îÇ ‚úÖ Cat√©gorie appropri√©e                   ‚îÇ
‚îÇ ‚úÖ 5/5 employ√©s avec carte CCQ valide    ‚îÇ
‚îÇ ‚ö†Ô∏è Attestation CSST expire dans 45 jours ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ SCORE: 95% CONFORME                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## Statistiques et Compteurs

### Fonctions de Comptage

```python
def compter_licences_actives(self) -> int:
    """Compte le nombre de licences RBQ actives"""

def compter_cartes_valides(self) -> int:
    """Compte le nombre de cartes CCQ valides"""

def compter_attestations_valides(self) -> int:
    """Compte le nombre d'attestations valides"""

def calculer_score_conformite(self) -> int:
    """Calcule le score global de conformit√© (0-100%)"""
```

---

## R√©glementation Importante

### Obligations L√©gales

| Obligation | Seuil | P√©nalit√© |
|------------|-------|----------|
| **Licence RBQ** | Travaux > 24 999$ | 5 000$ - 50 000$ |
| **Carte CCQ** | Chantier assujetti | 500$ - 5 000$ |
| **ASP Construction** | Tout chantier | 1 000$ - 10 000$ |
| **Attestation CSST** | Tout employeur | Variable |

### Validit√© des Documents

| Document | Dur√©e de validit√© |
|----------|-------------------|
| Licence RBQ | G√©n√©ralement 1-2 ans |
| Carte CCQ | 3 ans |
| ASP Construction | 3 ans |
| Premiers soins | 3 ans |
| SIMDUT | Recommand√© annuel |

---

## Astuces et Bonnes Pratiques

- **Num√©risez tous les documents** : Gardez des copies PDF accessibles
- **V√©rifiez AVANT chaque chantier** : Conformit√© = S√©curit√© + L√©galit√©
- **Planifiez √† 60 jours** : Commencez les renouvellements 2 mois avant
- **Centralisez les alertes** : Activez les notifications par courriel
- **Formez vos employ√©s** : ASP et SIMDUT sont obligatoires
- **Conservez les preuves** : Historique pour inspections RBQ/CNESST
- **V√©rifiez les sous-traitants** : Leur conformit√© est votre responsabilit√©

---

## R√©solution de Probl√®mes

### La licence n'appara√Æt pas dans la liste

- **Cause** : Filtre de statut actif
- **Solution** : D√©sactivez les filtres ou v√©rifiez le statut

### L'alerte d'expiration ne fonctionne pas

- **Cause** : Notifications d√©sactiv√©es
- **Solution** : Activez dans Configuration > Notifications

### Impossible de v√©rifier un projet

- **Cause** : Donn√©es manquantes (type, valeur)
- **Solution** : Compl√©tez les informations du projet

### Le score de conformit√© est bas

- **Cause** : Documents expir√©s ou manquants
- **Solution** : Consultez le d√©tail des non-conformit√©s

---

## Questions Fr√©quentes (FAQ)

**Q: Le syst√®me v√©rifie-t-il directement aupr√®s de la RBQ/CCQ ?**
R: Actuellement non. Les informations sont saisies manuellement. Une int√©gration avec les bases de donn√©es officielles est planifi√©e pour une version future.

**Q: Puis-je g√©n√©rer un rapport pour une inspection ?**
R: Oui, utilisez la fonction "G√©n√©rer rapport de conformit√©" pour obtenir un PDF complet avec tous les documents valides et leur statut.

**Q: Comment g√©rer les sous-traitants ?**
R: Ajoutez-les comme entreprises dans le module Entreprises avec leurs licences RBQ. Vous pouvez ensuite v√©rifier leur conformit√© avant de les embaucher sur un projet.

**Q: Les alertes sont-elles envoy√©es par courriel ?**
R: Oui, si les notifications sont activ√©es dans Configuration > Notifications. Les alertes sont envoy√©es √† 60 jours, 30 jours et √† l'expiration.

**Q: Comment suivre les formations des employ√©s ?**
R: Utilisez la section Comp√©tences dans le module Employ√©s pour suivre ASP, SIMDUT, Premiers soins, etc. Ces certifications sont √©galement visibles dans le rapport de conformit√©.

**Q: Puis-je importer les donn√©es depuis un fichier ?**
R: Un import CSV est pr√©vu. Contactez l'administrateur pour le format requis.

---

## Donn√©es Techniques

### Requ√™te Licences Expirant

```sql
SELECT *
FROM licences_rbq
WHERE date_expiration <= CURRENT_DATE + INTERVAL '60 days'
  AND date_expiration > CURRENT_DATE
ORDER BY date_expiration ASC
```

### Requ√™te Cartes CCQ Valides

```sql
SELECT c.*, e.prenom, e.nom
FROM cartes_ccq c
JOIN employees e ON c.employee_id = e.id
WHERE c.date_expiration > CURRENT_DATE
ORDER BY c.date_expiration ASC
```

### Structure Interface

```python
class ConformiteConstruction:
    def __init__(self, db_manager):
        self.db = db_manager
        self.categories_rbq = {...}  # 26 cat√©gories
        self.metiers_ccq = {...}     # 26 m√©tiers

    def afficher_interface(self):
        # 5 onglets: Licences, Cartes, Attestations, V√©rifications, Dashboard

    def gestion_licences_rbq(self): ...
    def gestion_cartes_ccq(self): ...
    def gestion_attestations(self): ...
    def verifications_conformite(self): ...
    def tableau_bord_conformite(self): ...
```

---

## Voir Aussi

- [üë• Employ√©s](12-employes.md) - Dossiers employ√©s et comp√©tences
- [üè≠ Production](11-production.md) - Assignation aux chantiers
- [üìã Projets](07-projets.md) - Gestion de projets
- [‚öôÔ∏è Configuration](27-configuration.md) - Param√©trage alertes et notifications
